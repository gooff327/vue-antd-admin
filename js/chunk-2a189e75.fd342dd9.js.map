{"version":3,"sources":["webpack:///./src/views/Permission/index.vue?ebb7","webpack:///./node_modules/core-js/modules/es.array.index-of.js","webpack:///./src/views/Permission/index.vue?e058","webpack:///src/views/Permission/index.vue","webpack:///./src/views/Permission/index.vue?8e5f","webpack:///./src/views/Permission/index.vue"],"names":["$","$indexOf","indexOf","sloppyArrayMethod","nativeIndexOf","NEGATIVE_ZERO","SLOPPY_METHOD","target","proto","forced","searchElement","apply","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","current","_l","item","key","title","steps","content","directives","name","rawName","value","expression","user","id","staticStyle","picture","large","slot","checkedUsers","hasOwnProperty","login","uuid","on","$event","onCheckChange","first","last","username","replaceFields","$store","getters","menus","model","callback","$$v","checkedMenus","Object","keys","next","_v","submit","prev","staticRenderFns","component"],"mappings":"gHAAA,yBAA4jB,EAAG,G,yDCC/jB,IAAIA,EAAI,EAAQ,QACZC,EAAW,EAAQ,QAA+BC,QAClDC,EAAoB,EAAQ,QAE5BC,EAAgB,GAAGF,QAEnBG,IAAkBD,GAAiB,EAAI,CAAC,GAAGF,QAAQ,GAAI,GAAK,EAC5DI,EAAgBH,EAAkB,WAItCH,EAAE,CAAEO,OAAQ,QAASC,OAAO,EAAMC,OAAQJ,GAAiBC,GAAiB,CAC1EJ,QAAS,SAAiBQ,GACxB,OAAOL,EAEHD,EAAcO,MAAMC,KAAMC,YAAc,EACxCZ,EAASW,KAAMF,EAAeG,UAAUC,OAAS,EAAID,UAAU,QAAKE,O,yCCjB5E,IAAIC,EAAS,WAAa,IAAIC,EAAIL,KAASM,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACE,YAAY,sBAAsB,CAACF,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,UAAU,CAACG,MAAM,CAAC,QAAUN,EAAIO,UAAUP,EAAIQ,GAAIR,EAAS,OAAE,SAASS,GAAM,OAAON,EAAG,SAAS,CAACO,IAAID,EAAKE,MAAML,MAAM,CAAC,MAAQG,EAAKE,YAAW,IAAI,GAAGR,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAMA,EAAG,UAAU,CAACG,MAAM,CAAC,QAAUN,EAAIY,MAAMZ,EAAIO,SAASM,QAAQ,UAAW,KAASV,EAAG,MAAM,CAACW,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAuB,IAAhBjB,EAAIO,QAAeW,WAAW,kBAAkBb,YAAY,gBAAgBL,EAAIQ,GAAIR,EAAY,UAAE,SAASmB,GAAM,OAAOhB,EAAG,SAAS,CAACO,IAAIS,EAAKC,GAAGH,MAAMI,YAAY,CAAC,MAAQ,QAAQ,gBAAgB,OAAOf,MAAM,CAAC,UAAY,KAAK,CAACH,EAAG,MAAM,CAACG,MAAM,CAAC,KAAO,QAAQ,IAAM,UAAU,IAAMa,EAAKG,QAAQC,OAAOC,KAAK,UAAUrB,EAAG,WAAW,CAACE,YAAY,mBAAmBmB,KAAK,WAAW,CAACrB,EAAG,aAAa,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,WAAW,CAACH,EAAG,SAAS,CAACG,MAAM,CAAC,KAAON,EAAIyB,aAAaC,eAAeP,EAAKQ,MAAMC,MAAQ,QAAU,QAAQC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO9B,EAAI+B,cAAcZ,QAAW,IAAI,GAAGhB,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQa,EAAKJ,KAAKiB,MAAM,IAAIb,EAAKJ,KAAKkB,KAAK,YAAcd,EAAKQ,MAAMO,aAAa,MAAK,GAAG/B,EAAG,MAAM,CAACW,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAuB,IAAhBjB,EAAIO,QAAeW,WAAW,kBAAkBb,YAAY,gBAAgB,CAACF,EAAG,SAAS,CAACG,MAAM,CAAC,WAAY,EAAK,cAAgBN,EAAImC,cAAc,SAAWnC,EAAIoC,OAAOC,QAAQC,OAAOC,MAAM,CAACtB,MAAOjB,EAAgB,aAAEwC,SAAS,SAAUC,GAAMzC,EAAI0C,aAAaD,GAAKvB,WAAW,mBAAmB,IAAI,GAAGf,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,WAAW,CAACW,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOjB,EAAIO,QAAUP,EAAIY,MAAMf,OAAS,GAAK8C,OAAOC,KAAK5C,EAAIyB,cAAc5B,OAAS,EAAGqB,WAAW,uEAAuEZ,MAAM,CAAC,KAAO,WAAWuB,GAAG,CAAC,MAAQ7B,EAAI6C,OAAO,CAAC7C,EAAI8C,GAAG,YAAY3C,EAAG,WAAW,CAACW,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAO0B,OAAOC,KAAK5C,EAAIyB,cAAc5B,OAAS,GAAqB,IAAhBG,EAAIO,QAAeW,WAAW,0DAA0DZ,MAAM,CAAC,KAAO,WAAW,CAACN,EAAI8C,GAAG,YAAY3C,EAAG,WAAW,CAACW,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOjB,EAAIO,UAAYP,EAAIY,MAAMf,OAAS,EAAGqB,WAAW,iCAAiCZ,MAAM,CAAC,KAAO,WAAWuB,GAAG,CAAC,MAAQ7B,EAAI+C,SAAS,CAAC/C,EAAI8C,GAAG,YAAY3C,EAAG,WAAW,CAACW,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOjB,EAAIO,QAAQ,EAAGW,WAAW,cAAcG,YAAY,CAAC,cAAc,OAAOQ,GAAG,CAAC,MAAQ7B,EAAIgD,OAAO,CAAChD,EAAI8C,GAAG,iBAAiB,MAClhFG,EAAkB,GCsDtB,G,4DAAA,CACE,KAAF,aACE,KAFF,WAGI,MAAJ,CACM,QAAN,EACM,MAAN,CACA,CACQ,MAAR,QACQ,QAAR,wCAEA,CACQ,MAAR,SACQ,QAAR,+CAEA,CACQ,MAAR,OACQ,QAAR,gCAGM,SAAN,GACM,aAAN,GACM,aAAN,GACM,cAAN,CACQ,MAAR,OACQ,IAAR,UAIE,QA5BF,WA6BI,KAAJ,oCAEE,QAAF,CACI,KADJ,WAEM,KAAN,UACA,kBACQ,QAAR,wBAGI,KAPJ,WAQM,KAAN,WAEI,OAVJ,WAUM,IAAN,OAEA,4BACA,gCACM,EAAN,iBACQ,IAAR,0BACA,iCACA,IAAU,GAAV,sBAEA,IAAU,GAAV,4BAGM,KAAN,kCAEI,cAxBJ,SAwBA,GACA,+CAGQ,KAAR,mDAFQ,KAAR,sDChH8V,I,wBCQ1VC,EAAY,eACd,EACAnD,EACAkD,GACA,EACA,KACA,WACA,MAIa,aAAAC,E","file":"js/chunk-2a189e75.fd342dd9.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=4e156c4d&scoped=true&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=4e156c4d&scoped=true&lang=stylus&\"","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar sloppyArrayMethod = require('../internals/sloppy-array-method');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar SLOPPY_METHOD = sloppyArrayMethod('indexOf');\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || SLOPPY_METHOD }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"permission-wrapper\"},[_c('div',{staticClass:\"steps-wrapper\"},[_c('a-steps',{attrs:{\"current\":_vm.current}},_vm._l((_vm.steps),function(item){return _c('a-step',{key:item.title,attrs:{\"title\":item.title}})}),1)],1),_c('div',{staticClass:\"steps-content\"},[_c('br'),_c('a-alert',{attrs:{\"message\":_vm.steps[_vm.current].content,\"closable\":false}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.current === 0),expression:\"current === 0\"}],staticClass:\"card-wrapper\"},_vm._l((_vm.userList),function(user){return _c('a-card',{key:user.id.value,staticStyle:{\"width\":\"160px\",\"border-radius\":\"6px\"},attrs:{\"hoverable\":\"\"}},[_c('img',{attrs:{\"slot\":\"cover\",\"alt\":\"example\",\"src\":user.picture.large},slot:\"cover\"}),_c('template',{staticClass:\"ant-card-actions\",slot:\"actions\"},[_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[_c('a-icon',{attrs:{\"type\":_vm.checkedUsers.hasOwnProperty(user.login.uuid) ? 'check' : 'plus'},on:{\"click\":function($event){return _vm.onCheckChange(user)}}})],1)],1),_c('a-card-meta',{attrs:{\"title\":user.name.first+','+user.name.last,\"description\":user.login.username}})],2)}),1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.current === 1),expression:\"current === 1\"}],staticClass:\"tree-wrapper\"},[_c('a-tree',{attrs:{\"checkable\":true,\"replaceFields\":_vm.replaceFields,\"treeData\":_vm.$store.getters.menus},model:{value:(_vm.checkedMenus),callback:function ($$v) {_vm.checkedMenus=$$v},expression:\"checkedMenus\"}})],1)],1),_c('div',{staticClass:\"steps-action\"},[_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.current < _vm.steps.length - 1 && Object.keys(_vm.checkedUsers).length > 0),expression:\"current < steps.length - 1 && Object.keys(checkedUsers).length > 0\"}],attrs:{\"type\":\"primary\"},on:{\"click\":_vm.next}},[_vm._v(\" Next \")]),_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(Object.keys(_vm.checkedUsers).length > 0 && _vm.current === 0),expression:\"Object.keys(checkedUsers).length > 0 && current === 0\"}],attrs:{\"type\":\"danger\"}},[_vm._v(\"Delete\")]),_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.current === _vm.steps.length - 1),expression:\"current === steps.length - 1\"}],attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\" Done \")]),_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.current>0),expression:\"current>0\"}],staticStyle:{\"margin-left\":\"8px\"},on:{\"click\":_vm.prev}},[_vm._v(\" Previous \")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <section class=\"permission-wrapper\">\n        <div class=\"steps-wrapper\">\n            <a-steps :current=\"current\">\n                <a-step v-for=\"item in steps\" :key=\"item.title\" :title=\"item.title\"/>\n            </a-steps>\n        </div>\n        <div class=\"steps-content\">\n            <br>\n            <a-alert :message=\"steps[current].content\" :closable=\"false\"/>\n            <div class=\"card-wrapper\" v-show=\"current === 0\">\n                <a-card v-for=\"user of userList\" :key=\"user.id.value\" hoverable style=\"width: 160px; border-radius: 6px\">\n                    <img\n                            alt=\"example\"\n                            :src=\"user.picture.large\"\n                            slot=\"cover\"\n                    />\n                    <template class=\"ant-card-actions\" slot=\"actions\">\n                        <transition name=\"fade\" mode=\"out-in\">\n                            <a-icon @click=\"onCheckChange(user)\" :type=\"checkedUsers.hasOwnProperty(user.login.uuid) ? 'check' : 'plus'\"/>\n                        </transition>\n                    </template>\n                    <a-card-meta :title=\"user.name.first+','+user.name.last\" :description= \"user.login.username\">\n                    </a-card-meta>\n                </a-card>\n            </div>\n            <div v-show=\"current === 1\" class=\"tree-wrapper\">\n                <a-tree\n                    :checkable=\"true\"\n                    v-model=\"checkedMenus\"\n                    :replaceFields=\"replaceFields\"\n                    :treeData=\"$store.getters.menus\"\n                />\n            </div>\n        </div>\n        <div class=\"steps-action\">\n            <a-button v-show=\"current < steps.length - 1 && Object.keys(checkedUsers).length > 0\" type=\"primary\" @click=\"next\">\n                Next\n            </a-button>\n            <a-button v-show=\"Object.keys(checkedUsers).length > 0 && current === 0\" type=\"danger\">Delete</a-button>\n            <a-button\n                v-show=\"current === steps.length - 1\"\n                type=\"primary\"\n                @click=\"submit\"\n            >\n                Done\n            </a-button>\n            <a-button v-show=\"current>0\" style=\"margin-left: 8px\" @click=\"prev\">\n                Previous\n            </a-button>\n        </div>\n    </section>\n</template>\n\n<script>\n    export default {\n        name: \"Permission\",\n        data () {\n            return {\n                current: 0,\n                steps: [\n                    {\n                        title: 'First',\n                        content: 'Choose users to Configure permission'\n                    },\n                    {\n                        title: 'Second',\n                        content: 'Configure available menu for selected users'\n                    },\n                    {\n                        title: 'Last',\n                        content: 'Please confirm your changes'\n                    }\n                ],\n                userList: [],\n                checkedUsers: {},\n                checkedMenus: [],\n                replaceFields: {\n                    title: 'name',\n                    key: 'name'\n                }\n            }\n        },\n        mounted() {\n            this.userList = this.$store.getters.users\n        },\n        methods: {\n            next () {\n                this.current ++\n                if (this.current === 2) {\n                    console.log(this.checkedMenus)\n                }\n            },\n            prev () {\n                this.current --\n            },\n            submit () {\n                // this.$message.success('Congratulations! All your change have submitted')\n                const menus = this.$store.getters.menus;\n                const {role} = this.$store.getters.self;\n                menus.map(menu => {\n                    const index =  menu.meta.roles.indexOf(role);\n                    if (this.checkedMenus.includes(menu.name)) {\n                        index === -1 ? menu.meta.roles.push(role) : undefined\n                    } else {\n                        index !== -1 ? menu.meta.roles.splice(index, 1) : undefined\n                    }\n                });\n                this.$store.dispatch(\"changeMenus\", menus)\n            },\n            onCheckChange(user) {\n                if (!this.checkedUsers.hasOwnProperty(user.login.uuid)) {\n                    this.$set(this.checkedUsers, `${user.login.uuid}`, user)\n                } else {\n                    this.$delete(this.checkedUsers, `${user.login.uuid}`)\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n    .permission-wrapper\n        position: relative;\n        .steps-wrapper\n            display flex\n            justify-content center\n            align-items center\n            .ant-steps\n                flex 0\n\n        .card-wrapper\n            .ant-card\n                float left\n                margin 20px\n\n        .steps-action\n            position: absolute;\n            right 0\n            top 0\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4e156c4d&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4e156c4d&scoped=true&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4e156c4d\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}